/*!
 * ui-tree
 * http://github.com/jimliu/ui-tree
 * Version: 3.0.0 - 2015-01-12T03:48:12.483Z
 * License: MIT
 */
!function(){"use strict";void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),angular.module("ui.tree",[]).constant("uiTreeConfig",{theme:"default",multiple:!1}),angular.module("ui.tree").service("uiTreeMinErr",function(){var e=angular.$$minErr("ui.tree");return function(){var t=e.apply(this,arguments),n=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(n)}}),angular.module("ui.tree").controller("uiTreeCtrl",["$scope","$timeout",function(e,t){var n,r=this,o=r.nodes=e.nodes=[];r.selected=void 0,r.multiple=!1,r.wholerow=!1,r.clickTriggeredSelect=!1,r.addNode=function(e){o.push(e)},r.removeNode=function(e){var t=o.indexOf(e);o.splice(t,1)},e.$on("$destroy",function(){n=!0}),r.isEmpty=function(){return angular.isUndefined(r.selected)||null===r.selected||""===r.selected},r.select=function(n,o){r.nodes&&r.nodes.length&&(r.multiple?(r.selected||(r.selected=[]),r.selected.push(n)):(r.selected&&r.selected.unselect(),r.selected=n),n.select(),t(function(){r.onSelectCallback&&r.onSelectCallback(e,{$node:n,$model:null})}),o&&"click"===o.type&&(r.clickTriggeredSelect=!0))},r.expandSelected=function(){r.multiple||r.selected&&r.selected.expand()},r.collapseSelected=function(){r.multiple||r.selected&&r.selected.collapse()},r.moveUp=function(){if(!r.multiple&&r.selected){var e=r.selected.prevExpandedNode();e&&r.select(e)}},r.moveDown=function(){if(!r.multiple&&r.selected){var e=r.selected.nextExpandedNode();e&&r.select(e)}}}]),angular.module("ui.tree").controller("uiTreeNodeCtrl",["$scope","$compile","uiTreeMinErr",function(e){var t,n,r,o,l,d=this,i=d.scope=e,a=d.nodes=e.nodes=[],u=null;i.selected=!1,i.hovered=!1,e.init=function(e){i.$parentNode=n=e[0],o=e[1],u=e[2],i.$tree=o,d.ngModel=u,r=n?n:o,r.addNode(i),u.$render=function(){l=i.$node=u.$viewValue}},d.addNode=function(e){a.push(e)},d.removeNode=function(e){var t=a.indexOf(e);a.splice(t,1)},e.toggle=function(){l.collapsed=!l.collapsed},e.expand=function(){l.collapsed=!1},e.collapse=function(){l.collapsed=!0},e.index=function(){return r.nodes.indexOf(e)},e.prev=function(){var t=e.index();return t>0?r.nodes[t-1]:null},e.next=function(){var t=e.index();return t<r.nodes.length-1?r.nodes[t+1]:null},e.prevExpandedNode=function(){var t=e.prev();return t?t.lastExpanedNode():n?n.scope:null},e.lastExpanedNode=function(){if(l.collapsed||0===a.length)return e;var t=a[a.length-1];return t.lastExpanedNode()},e.nextExpandedNode=function(){if(!l.collapsed&&a.length>0)return a[0];var t=e.next();if(t)return t.$node.collapsed||0===t.nodes.length?t:t.nodes[0];for(var n=e.$parentNode?e.$parentNode.scope:null;n&&!t;)t=n.next(),n=n.$parentNode?n.$parentNode.scope:null;return t},e.depth=function(){return n?n.scope.depth()+1:1},e.select=function(){e.disabled||e.selected||(e.selected=!0)},e.unselect=function(){!e.disabled&&e.selected&&(e.selected=!1)},e.hover=function(){e.hovered||e.selected||e.disabled||(e.hovered=!0)},e.unhover=function(){e.hovered&&(e.hovered=!1)},e.headerClick=function(t){t.preventDefault(),e.$apply(function(){o.select(e,t)})},e.headerHover=function(t){t.stopImmediatePropagation(),t.preventDefault(),e.$apply(function(){e.hover()})},e.headerUnhover=function(t){t.stopImmediatePropagation(),t.preventDefault(),e.$apply(function(){e.unhover()})},e.$on("$destroy",function(){t=!0,r.removeNode(i)})}]),angular.module("ui.tree").directive("uiTreeKeyHandler",["$document",function(e){return{restrict:"A",require:"^uiTree",link:function(t,n,r,o){e.bind("keydown keypress",function(n){var r=e[0].activeElement.tagName;if("TEXTAREA"!==r&&"INPUT"!==r&&"SELECT"!==r)switch(n.which){case 13:break;case 37:n.preventDefault(),t.$apply(function(){o.collapseSelected()});break;case 38:n.preventDefault(),t.$apply(function(){o.moveUp()});break;case 39:n.preventDefault(),t.$apply(function(){o.expandSelected()});break;case 40:n.preventDefault(),t.$apply(function(){o.moveDown()});break;case 36:n.preventDefault();break;case 35:n.preventDefault();break;case 46:n.preventDefault()}})}}}]),angular.module("ui.tree").directive("uiTree",["$document","uiTreeConfig","uiTreeMinErr","$parse","$log",function(e,t,n){return{restrict:"EA",templateUrl:function(e,n){var r=n.theme||t.theme;return r+"/tree.tpl.html"},replace:!0,require:["uiTree","ngModel"],scope:!0,controller:"uiTreeCtrl",controllerAs:"$tree",link:function(e,t,r,o){var l=o[0],d=o[1];l.ngModel=d,d.$render=function(){if(!angular.isArray(d.$viewValue))throw n("treeModel","Expected model value to be array but got '{0}'",d.$viewValue);l.$nodes=d.$viewValue},r.$observe("wholerow",function(){l.wholerow=void 0!==r.wholerow?e.$eval(r.wholerow):!1})}}}]),angular.module("ui.tree").directive("uiTreeNode",["uiTreeConfig","uiTreeMinErr","$parse","$compile","$http","$templateCache",function(e,t,n,r,o,l){return{restrict:"EA",require:["?^^uiTreeNode","^uiTree","ngModel"],replace:!0,scope:!0,controller:"uiTreeNodeCtrl",controllerAs:"$treeNode",link:function(t,d,i,a){t.init(a,d),t.onSelectCallback=n(i.onSelect);var u=a[1],c=u.theme||e.theme,s=i.templateUrl||c+"/tree-node.tpl.html";o.get(s,{cache:l}).then(function(e){if(d.html(e.data),angular.isArray(t.$node.nodes)){var n="<ui-tree-nodes nodes='$node.nodes' parent='$node'></ui-tree-nodes>";d.querySelectorAll(".ui-tree-nodes-placeholder").replaceWith(n)}r(d.contents())(t)})}}}]),angular.module("ui.tree").directive("uiTreeNodeHeader",[function(){return{restrict:"A",require:"^uiTreeNode",link:function(e,t,n){var r=n.uiTreeNodeHeader,o="wholerow"==r;t.bind("click",function(t){t.stopImmediatePropagation(),e.headerClick(t)}),t.bind("mouseover",function(t){t.stopImmediatePropagation(),e.headerHover(t)}),t.bind("mouseleave",function(t){t.stopImmediatePropagation(),e.headerUnhover(t)}),e.$watch("selected",function(e){e?o?t.addClass("ui-tree-node-wholerow-selected"):t.addClass("ui-tree-node-selected"):(t.removeClass("ui-tree-node-selected"),t.removeClass("ui-tree-node-wholerow-selected"))}),e.$watch("hovered",function(e){e?o?t.addClass("ui-tree-node-wholerow-hover"):t.addClass("ui-tree-node-header-hover"):(t.removeClass("ui-tree-node-header-hover"),t.removeClass("ui-tree-node-wholerow-hover"))})}}}]),angular.module("ui.tree").directive("uiTreeNodes",["uiTreeConfig",function(e){return{restrict:"E",replace:!0,scope:{nodes:"=",parent:"="},templateUrl:function(t){var n=t.parent().attr("theme")||e.theme;return n+"/tree-nodes.tpl.html"}}}])}(),angular.module("ui.tree").run(["$templateCache",function(e){e.put("default/tree-node.tpl.html",'<li class="ui-tree-node"><div ng-if="$tree.wholerow" class="ui-tree-node-wholerow" ui-tree-node-header="wholerow">&nbsp;</div><a class="ui-tree-link" tabindex="-1" ng-click="toggle()"><i ng-class="{\'fa-caret-right\': $node.collapsed, \'fa-caret-down\': !$node.collapsed}" class="ui-tree-icon fa"></i></a><a class="ui-tree-link ui-tree-node-header" href="javascript:void(0)" tabindex="-1" ui-tree-node-header=""><i class="fa fa-folder" ng-class="{\'fa-folder\': $node.collapsed, \'fa-folder-open\': !$node.collapsed}"></i> {{$node.text}}</a><div class="ui-tree-nodes-placeholder"></div></li>'),e.put("default/tree-nodes.tpl.html",'<ul class="ui-tree-nodes" ng-show="nodes.length > 0 && (!parent || !parent.collapsed)"><ui-tree-node ng-repeat="n in nodes" ng-model="n"></ui-tree-node></ul>'),e.put("default/tree.tpl.html",'<div class="ui-tree tree-default" ng-class="{\'ui-tree-wholerow\': $tree.wholerow}" ui-tree-key-handler=""><ui-tree-nodes nodes="$tree.$nodes" parent="null"></ui-tree-nodes></div>')}]);